function patents_graph(t){{var e,i,n,a,o,s,r,l,c=jQuery.noConflict(),d=this,h=t,p=c(h),u={top:20,right:0,bottom:20,left:0},f=1140,g=500;d3.time.format("%Y").parse}d.init=function(){return console.log("patents",p),f=p.width(),g=.5625*f,e=f-u.left-u.right,i=g-u.top-u.bottom,a=d3.scale.ordinal().rangeRoundBands([0,e],.1),o=d3.scale.linear().range([i,0]),s=d3.svg.axis().scale(a).orient("bottom"),r=d3.svg.axis().scale(o).orient("left"),l=d3.svg.line().x(function(t){return a(t.date)}).y(function(t){return o(t.patents)}),n=d3.select(h).append("svg").attr("id","patents-graph-svg").attr("width",f).attr("height",g).append("g").attr("transform","translate("+u.left+","+u.top+")"),console.log("set size",f,g),d3.csv(c("body").data("url")+"/dist/csv/patents.csv",function(t,e){e.forEach(function(t){t.patents=+t.patents}),a.domain(e.map(function(t){return t.date})),o.domain([0,d3.max(e,function(t){return t.patents})]),n.append("g").attr("class","x axis").attr("transform","translate(0,"+i+")").call(s),n.append("line").attr("class","marker").attr("x1",function(t){return a(2007)}).attr("y1",i).attr("x2",function(t){return a(2007)}).attr("y2",i),n.append("g").attr("class","marker-label").attr("x1",function(t){return a(2007)}).append("text").txt("Se aprueba la licencia obligatoria"),n.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",function(t){return a(t.date)}).attr("y",i).attr("height",0).attr("width",a.rangeBand()),n.selectAll(".bar-label").data(e).enter().append("text").attr("class","bar-label").attr("x",function(t){return a(t.date)}).attr("y",function(t){return o(t.patents)}).attr("dy","1em").attr("dx","4px").text(function(t){return t.patents}),d3.selectAll(".bar").transition().duration(800).delay(function(t,e){return 100*e}).attr("y",function(t){return o(t.patents)}).attr("height",function(t){return i-o(t.patents)}),d3.select(".marker").transition().duration(600).delay(1500).attr("y1",0)}),d},d.onResize=function(){return f=p.width(),g=.5625*f,e=f-u.left-u.right,i=g-u.top-u.bottom,m(),d};var m=function(){console.log("update data"),d3.select("#patents-graph-svg").attr("width",f).attr("height",g),a.rangeRoundBands([0,e],.1),o.range([i,0]),d3.select("g.x.axis").attr("transform","translate(0,"+i+")").call(s),d3.selectAll(".bar").attr("x",function(t){return a(t.date)}).attr("y",function(t){return o(t.patents)}).attr("width",a.rangeBand()).attr("height",function(t){return i-o(t.patents)}),d3.selectAll(".bar-label").attr("x",function(t){return a(t.date)}).attr("y",function(t){return o(t.patents)}),d3.select(".marker").attr("x1",function(t){return a(2007)}).attr("x2",function(t){return a(2007)}).attr("y2",i)};return d}function Main_Infographic(t){var e,i,n,a,o,s,r,l,c,d,h,p,u,f,g=jQuery.noConflict(),m=this,y=!1,v=.7,b={data:"prices",type:"public",order:"area",label:"Price"},w={es:{gratis:"gratis",dias:"DÃ­as",horas:"horas"},en:{gratis:"free",dias:"Days",horas:"hours"}},x=0,C={top:150,right:50,bottom:50,left:50},$=t,T=g($),A=g("#main-infographic-tooltip"),k=T.parent().data("lang"),I=d3.scale.ordinal().range(["#C9AD4B","#BBD646","#63BA2D","#34A893","#3D91AD","#5B8ACB","#BA7DAF","#BF6B80","#F49D9D","#E25453","#B56631","#E2773B","#FFA951","#F4CA00"]),D=function(t){return 0===t?w[k].gratis:t+"x"},S=function(t){return 0===t?w[k].gratis:t};m.init=function(){return y=!0,Z(),s=d3.scale.ordinal().rangePoints([0,n]),r=d3.scale.pow().exponent(.5).range([a,0]),l=d3.svg.axis().scale(s).tickSize(-a).tickPadding(12).tickSubdivide(!0).orient("bottom"),c=d3.svg.axis().scale(r).tickSize(-n).tickPadding(8).tickFormat(D).orient("left"),o=d3.select($).append("svg").attr("id","main-infographic-svg").attr("width",e).attr("height",i).append("g").attr("transform","translate("+C.left+","+C.top+")"),queue().defer(d3.csv,g("body").data("url")+"/dist/csv/prices.csv").defer(d3.csv,g("body").data("url")+"/dist/csv/affordability.csv").defer(d3.csv,g("body").data("url")+"/dist/csv/countries.csv").await(E),m},m.setState=function(t){return 5===t?(d3.select(".overlay").on("mouseout",j).on("mousemove",_),d3.selectAll(".dot").on("mouseover",L).on("mouseout",U)):5===x&&d3.selectAll(".dot").on("mouseover",null).on("mouseout",null),x=t,m},m.resize=function(){return Z(),d3.select("#main-infographic-svg").attr("width",e).attr("height",i),s.rangePoints([0,n]),r.range([a,0]),l.tickSize(-a),c.tickSize(-n),d3.select("g.x.axis").attr("transform","translate(0,"+a+")").call(l),d3.select("g.y.axis").call(c),d3.select(".country-marker").attr("y1",a),d3.select(".country-label-code").attr("y",a+21),d3.select(".country-label").attr("y",a+36),d3.select(".mpr-line").attr("transform","translate(0 "+r(1)+")"),d3.select(".mpr-line line").attr("x2",n),d3.select(".overlay").attr("width",n).attr("height",a),d3.selectAll(".dot-lines .line").attr("x1",H).attr("y1",a).attr("x2",H).attr("y2",G),d3.selectAll(".dot").attr("cx",H).attr("cy",G),m},m.isInitialized=function(){return y};var E=function(t,e,i,n){e=e.filter(function(t){return"MPR"===t["Unit/MPR"]}),e.forEach(function(t){t.Price="NO DATA"===t.Price?null:"free"!==t.Price?+t.Price:0}),i.forEach(function(t){var e=t["Public sector - number of days"],i=t["Private sector - number of days"];t["Public sector - number of days"]="NO DATA"!==e&&""!==e?+e:null,t["Private sector - number of days"]="NO DATA"!==i&&""!==i?+i:null}),u=f=n,d=e.filter(function(t){return"Public"===t["Public/Private"]}),h=e.filter(function(t){return"Private"===t["Public/Private"]}),p=i,O(),e=i=n=null,P(),B()},P=function(){var t=q();g("#main-infographic-menu ."+b.data+"-"+b.type).show(),s.domain(u.map(function(t){return t.Code})),r.domain(d3.extent(t,function(t){return t[b.label]})).nice(),I.domain(d3.extent(t,function(t){return t.Drug})),l.ticks(u.length),o.append("g").attr("class","x axis").attr("transform","translate(0,"+a+")").call(l),o.append("g").attr("class","y axis").call(c).append("text").attr("class","y-label").attr("y",-15).style("opacity",0).style("text-anchor","end").text(w[k].dias),o.append("line").attr("class","country-marker").attr("x1",0).attr("y1",a).attr("x2",0).attr("y2",0).style("opacity",0),o.append("text").attr("class","country-label-code").attr("y",a+21).style("opacity",0),o.append("text").attr("class","country-label").attr("y",a+36).style("opacity",0),o.append("g").attr("class","mpr-line").attr("transform","translate(0 "+r(1)+")").append("line").attr("x1",0).attr("y1",0).attr("x2",n).attr("y2",0),d3.select(".mpr-line").append("text").attr("x",-8).attr("y",0).attr("dy","0.32em").text("MPR"),o.append("rect").attr("class","overlay").style("opacity",0).attr("width",n).attr("height",a),o.append("g").attr("class","dot-lines").selectAll(".dot-line").data(t).enter().append("line").attr("id",z).attr("class",function(t){return"line"+V(t)}).attr("x1",H).attr("y1",a).attr("x2",H).attr("y2",G).style("visibility",Q).style("opacity",0).style("stroke",K),o.append("g").attr("class","dots").selectAll(".dot").data(t).enter().append("circle").attr("id",z).attr("class",function(t){return"dot"+V(t)}).attr("r",7).attr("cx",H).attr("cy",G).style("visibility",Q).style("opacity",v).style("fill",K)},N=function(){if(b.data=g("#mpr-btn").hasClass("active")?"prices":"affordability",b.type=g("#public-btn").hasClass("active")?"public":"private",b.label="prices"===b.data?"Price":"public"===b.type?"Public sector - number of days":"Private sector - number of days",!y)return m;g("#main-infographic-menu h4").hide(),g("#main-infographic-menu ."+b.data+"-"+b.type).show();var t,e=q();return"prices"===b.data?(c.tickFormat(D),d3.select(".y-label").transition().duration(1e3).style("opacity",0)):(c.tickFormat(S),d3.select(".y-label").transition().duration(1e3).style("opacity",1)),r.domain(d3.extent(e,function(t){return t[b.label]})).nice(),o.select(".y.axis").transition().duration(1200).ease("sin-in-out").call(c),"prices"===b.data?d3.select(".mpr-line").transition().duration(1200).attr("transform","translate(0 "+r(1)+")").style("opacity",1):d3.select(".mpr-line").transition().duration(1200).style("opacity",0),o.selectAll(".dot, .line").style("visibility","hidden"),e.forEach(function(e){t=o.select(".dot"+W(e)),t.empty()?(d3.select(".dot-lines").append("line").datum(e).attr("id",z).attr("class",function(t){return"line"+V(t)}).attr("x1",H).attr("y1",a).attr("x2",H).attr("y2",G).style("visibility",Q).style("opacity",0).style("stroke",K),d3.select(".dots").append("circle").datum(e).attr("id",z).attr("class",function(t){return"dot"+V(t)}).attr("r",7).attr("cx",H).attr("cy",G).style("visibility",Q).style("opacity",v).style("fill",K).on("mouseover",L).on("mouseout",U)):(t.datum(e).style("visibility",Q).transition().duration(1200).attr("cx",H).attr("cy",G),t=o.select(".line"+W(e)),t.datum(e).style("visibility",Q).attr("y2",G))}),m},B=function(){g("#mpr-btn, #affordability-btn").click(function(t){g(this).hasClass("active")||(g("#mpr-btn, #affordability-btn").removeClass("active"),g(this).addClass("active"),N())}),g("#public-btn, #private-btn").click(function(t){g(this).hasClass("active")||(g("#public-btn, #private-btn").removeClass("active"),g(this).addClass("active"),N())}),g("#area-btn, #pib-btn").click(function(t){g(this).hasClass("active")||(g("#area-btn, #pib-btn").removeClass("active"),g(this).addClass("active"),R())}),g("#region-dropdown-menu .checkbox input").change(function(t){M()})},R=function(){b.order=g("#area-btn").hasClass("active")?"area":"pib","area"===b.order?O():u.sort(function(t,e){return d3.ascending(+t.PIB,+e.PIB)}),s.domain(u.map(function(t){return t.Code})),d3.selectAll(".line").attr("x1",H).attr("x2",H);var t=o.transition().duration(1e3);return t.selectAll(".dot").attr("cx",H),t.select(".x.axis").call(l).selectAll("g"),m},O=function(){u.sort(function(t,e){return t.Area===e.Area?d3.ascending(t["Country_"+k],e["Country_"+k]):d3.ascending(t.Area,e.Area)})},M=function(){var t="";g("#region-dropdown-menu .checkbox input").each(function(){g(this).is(":checked")&&(t+=g(this).attr("name")+" ")}),""===t&&g("#region-dropdown-menu .checkbox input").each(function(){g(this).attr("checked",!0),t+=g(this).attr("name")+" "}),u=f.filter(function(e){return t.indexOf(e.Area)>-1}),"pib"===b.order&&u.sort(function(t,e){return d3.ascending(+t.PIB,+e.PIB)}),s.domain(u.map(function(t){return t.Code})),d3.selectAll(".dot, .line").style("visibility",Q),d3.selectAll(".line").attr("x1",H).attr("x2",H);var e=o.transition().duration(1e3);e.selectAll(".dot").attr("cx",H),e.select(".x.axis").call(l).selectAll("g")},L=function(){var t=d3.select(this);o.selectAll(".dot").style("fill","#cacaca").style("opacity",v),o.selectAll(".dot.drug-"+t.attr("id")).style("fill",function(t){return I(t.Drug)}).style("opacity",1),o.selectAll(".line.drug-"+t.attr("id")+", .country-label, .country-label-code").style("opacity",1),o.selectAll(".dot").sort(function(e,i){return t.attr("id")===F(e.Drug)?1:-1});var i=+t.data()[0][b.label],a="prices"!==b.data?"glyphicon-time":1>i?"glyphicon-arrow-down":"glyphicon-arrow-up";A.find(".country").html(Y(t.data()[0].Country)[0]["Region_"+k]),A.find(".year").html("("+t.data()[0].Year+")"),A.find(".drug, .green .glyphicon, .green .txt").hide(),A.find(".drug-"+t.data()[0].Drug.toLowerCase()).show(),A.find(".green ."+a).show(),0!==i?(A.find(".price").html(i),A.find(".green ."+b.data+"-txt").show()):A.find(".price").html("gratis"),"prices"!==b.data&&1>i&&0!==i&&A.find(".affordability-txt-hour").html("  ("+Math.round(8*i)+" "+w[k].horas+")").show();var s=t.attr("cx")>.5*n;s?A.addClass("left").css({right:e-Math.round(t.attr("cx"))-C.left+"px",left:"auto"}):A.removeClass("left").css({right:"auto",left:Math.round(t.attr("cx"))+C.left+"px"}),A.css({top:Math.round(t.attr("cy"))+C.top-8-.5*A.height()+"px",opacity:"1"})},U=function(){o.selectAll(".line").style("opacity",0),o.selectAll(".dot").style("fill",function(t){return I(t.Drug)}).style("opacity",v),A.css({opacity:"0",right:"auto",left:"-1000px"})},_=function(){for(var t=d3.mouse(this)[0],e=s.range(),i=n/(u.length-1),a=0;t>e[a]+.5*i;)a++;var o=s.domain()[a];d3.select(".country-marker").style("opacity",1).attr("transform","translate("+s(o)+" 0)");var r=u.filter(function(t){return t.Code===o});d3.select(".country-label-code").attr("x",s(o)).style("opacity",1).text(o),d3.select(".country-label").attr("x",s(o)).style("opacity",1).text(r[0]["Country_"+k])},j=function(){d3.selectAll(".country-marker, .country-label, .country-label-code").style("opacity",0)},F=function(t){return t.toLowerCase().replace(/[ +,\/]/g,"-")},z=function(t){return F(t.Drug)},W=function(t){return".country-"+F(t.Country)+".drug-"+F(t.Drug)},V=function(t){return" country-"+F(t.Country)+" drug-"+F(t.Drug)},H=function(t){var e=Y(t.Country);return e.length>0?s(e[0].Code):0},G=function(t){return null!==t[b.label]?r(t[b.label]):a},Q=function(t){return null!==t[b.label]&&u.some(function(e){return e.Region_en===t.Country})?"visible":"hidden"},K=function(t){return I(t.Drug)},q=function(){return"affordability"===b.data?p:"public"===b.type?d:h},Y=function(t){return u.filter(function(e){return e.Region_en===t})},Z=function(){e=T.width(),i=T.height(),n=e-C.left-C.right,a=i-C.top-C.bottom};return m}+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var a=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(a,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),a=i.data("bs.alert");a||i.data("bs.alert",a=new n(this)),"string"==typeof e&&a[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.close=function(e){function i(){s.detach().trigger("closed.bs.alert").remove()}var a=t(this),o=a.attr("data-target");o||(o=a.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var s=t(o);e&&e.preventDefault(),s.length||(s=a.closest(".alert")),s.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(s.removeClass("in"),t.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i())};var a=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=a,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.button"),o="object"==typeof e&&e;a||n.data("bs.button",a=new i(this,o)),"toggle"==e?a.toggle():e&&a.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.3.4",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,a=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[a]()),setTimeout(t.proxy(function(){n[a](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:o.slide;a||n.data("bs.carousel",a=new i(this,o)),"number"==typeof e?a.to(e):s?a[s]():o.interval&&a.pause().cycle()})}var i=function(e,i){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.3.4",i.TRANSITION_DURATION=600,i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},i.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.getItemForDirection=function(t,e){var i=this.getItemIndex(e),n="prev"==t&&0===i||"next"==t&&i==this.$items.length-1;if(n&&!this.options.wrap)return e;var a="prev"==t?-1:1,o=(i+a)%this.$items.length;return this.$items.eq(o)},i.prototype.to=function(t){var e=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):i==t?this.pause().cycle():this.slide(t>i?"next":"prev",this.$items.eq(t))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,n){var a=this.$element.find(".item.active"),o=n||this.getItemForDirection(e,a),s=this.interval,r="next"==e?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var c=o[0],d=t.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(d),!d.isDefaultPrevented()){if(this.sliding=!0,s&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var p=t.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,a.addClass(r),o.addClass(r),a.one("bsTransitionEnd",function(){o.removeClass([e,r].join(" ")).addClass("active"),a.removeClass(["active",r].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(i.TRANSITION_DURATION)):(a.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),s&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this};var a=function(i){var n,a=t(this),o=t(a.attr("data-target")||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=t.extend({},o.data(),a.data()),r=a.attr("data-slide-to");r&&(s.interval=!1),e.call(o,s),r&&o.data("bs.carousel").to(r),i.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){var i,n=e.attr("data-target")||(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"");return t(n)}function i(e){return this.each(function(){var i=t(this),a=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!a&&o.toggle&&/show|hide/.test(e)&&(o.toggle=!1),a||i.data("bs.collapse",a=new n(this,o)),"string"==typeof e&&a[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.$trigger=t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};n.VERSION="3.3.4",n.TRANSITION_DURATION=350,n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,a=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(a&&a.length&&(e=a.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){a&&a.length&&(i.call(a,"hide"),e||a.data("bs.collapse",null));var s=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[s](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[s](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var l=t.camelCase(["scroll",s].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(n.TRANSITION_DURATION)[s](this.$element[0][l])}}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var a=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(n.TRANSITION_DURATION):a.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},n.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(i,n){var a=t(n);this.addAriaAndCollapsedClass(e(a),a)},this)).end()},n.prototype.addAriaAndCollapsedClass=function(t,e){var i=t.hasClass("in");t.attr("aria-expanded",i),e.toggleClass("collapsed",!i).attr("aria-expanded",i)};var a=t.fn.collapse;t.fn.collapse=i,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=a,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var a=t(this);a.attr("data-target")||n.preventDefault();var o=e(a),s=o.data("bs.collapse"),r=s?"toggle":a.data();i.call(o,r)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(a).remove(),t(o).each(function(){var n=t(this),a=i(n),o={relatedTarget:this};a.hasClass("open")&&(a.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(n.attr("aria-expanded","false"),a.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var a=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.3.4",s.prototype.toggle=function(n){var a=t(this);if(!a.is(".disabled, :disabled")){var o=i(a),s=o.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var r={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",r)),n.isDefaultPrevented())return;a.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",r)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var a=i(n),s=a.hasClass("open");if(!s&&27!=e.which||s&&27==e.which)return 27==e.which&&a.find(o).trigger("focus"),n.trigger("click");var r=" li:not(.disabled):visible a",l=a.find('[role="menu"]'+r+', [role="listbox"]'+r);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var r=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=r,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o,s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',s.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',s.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var a=t(this),o=a.data("bs.modal"),s=t.extend({},i.DEFAULTS,a.data(),"object"==typeof e&&e);o||a.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.3.4",i.TRANSITION_DURATION=300,i.BACKDROP_TRANSITION_DURATION=150,i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var n=this,a=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(a),this.isShown||a.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var a=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),a&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});a?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(i.TRANSITION_DURATION):n.$element.trigger("focus").trigger(o)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(i.TRANSITION_DURATION):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},i.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var n=this,a=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&a;if(this.$backdrop=t('<div class="modal-backdrop '+a+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(i.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},i.prototype.handleUpdate=function(){this.adjustDialog()},i.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},i.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},i.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),a=n.attr("href"),o=t(n.attr("data-target")||a&&a.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(a)&&a},o.data(),n.data());n.is("a")&&i.preventDefault(),
o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.tooltip"),o="object"==typeof e&&e;(a||!/destroy|hide/.test(e))&&(a||n.data("bs.tooltip",a=new i(this,o)),"string"==typeof e&&a[e]())})}var i=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){if(this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var a=this.options.trigger.split(" "),o=a.length;o--;){var s=a[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var r="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(r+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i&&i.$tip&&i.$tip.is(":visible")?void(i.hoverState="in"):(i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show())},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var a=this,o=this.tip(),s=this.getUID(this.type);this.setContent(),o.attr("id",s),this.$element.attr("aria-describedby",s),this.options.animation&&o.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(r);c&&(r=r.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var d=this.getPosition(),h=o[0].offsetWidth,p=o[0].offsetHeight;if(c){var u=r,f=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(f);r="bottom"==r&&d.bottom+p>g.bottom?"top":"top"==r&&d.top-p<g.top?"bottom":"right"==r&&d.right+h>g.width?"left":"left"==r&&d.left-h<g.left?"right":r,o.removeClass(u).addClass(r)}var m=this.getCalculatedOffset(r,d,h,p);this.applyPlacement(m,r);var y=function(){var t=a.hoverState;a.$element.trigger("shown.bs."+a.type),a.hoverState=null,"out"==t&&a.leave(a)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",y).emulateTransitionEnd(i.TRANSITION_DURATION):y()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),a=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),r=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(r)&&(r=0),e.top=e.top+s,e.left=e.left+r,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var d=this.getViewportAdjustedDelta(i,e,l,c);d.left?e.left+=d.left:e.top+=d.top;var h=/top|bottom/.test(i),p=h?2*d.left-a+l:2*d.top-o+c,u=h?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(p,n[0][u],h)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i?"left":"top",50*(1-t/e)+"%").css(i?"top":"left","")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(e){function n(){"in"!=a.hoverState&&o.detach(),a.$element.removeAttr("aria-describedby").trigger("hidden.bs."+a.type),e&&e()}var a=this,o=t(this.$tip),s=t.Event("hide.bs."+this.type);return this.$element.trigger(s),s.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName,a=i.getBoundingClientRect();null==a.width&&(a=t.extend({},a,{width:a.right-a.left,height:a.bottom-a.top}));var o=n?{top:0,left:0}:e.offset(),s={scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=n?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},a,s,r,o)},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var a={top:0,left:0};if(!this.$viewport)return a;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var r=e.top-o-s.scroll,l=e.top+o-s.scroll+n;r<s.top?a.top=s.top-r:l>s.top+s.height&&(a.top=s.top+s.height-l)}else{var c=e.left-o,d=e.left+o+i;c<s.left?a.left=s.left-c:d>s.width&&(a.left=s.left+s.width-d)}return a},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.popover"),o="object"==typeof e&&e;(a||!/destroy|hide/.test(e))&&(a||n.data("bs.popover",a=new i(this,o)),"string"==typeof e&&a[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.3.4",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){this.$body=t(document.body),this.$scrollElement=t(t(i).is(document.body)?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",t.proxy(this.process,this)),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),a=n.data("bs.scrollspy"),o="object"==typeof i&&i;a||n.data("bs.scrollspy",a=new e(this,o)),"string"==typeof i&&a[i]()})}e.VERSION="3.3.4",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e=this,i="offset",n=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),t.isWindow(this.$scrollElement[0])||(i="position",n=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=t(this),a=e.data("target")||e.attr("href"),o=/^#./.test(a)&&t(a);return o&&o.length&&o.is(":visible")&&[[o[i]().top+n,a]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),a=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<a[0])return this.activeTarget=null,this.clear();for(t=a.length;t--;)s!=o[t]&&e>=a[t]&&(void 0===a[t+1]||e<a[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.tab");a||n.data("bs.tab",a=new i(this)),"string"==typeof e&&a[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var a=i.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),s=t.Event("show.bs.tab",{relatedTarget:a[0]});if(a.trigger(o),e.trigger(s),!s.isDefaultPrevented()&&!o.isDefaultPrevented()){var r=t(n);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){a.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:a[0]})})}}},i.prototype.activate=function(e,n,a){function o(){s.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),a&&a()}var s=n.find("> .active"),r=a&&t.support.transition&&(s.length&&s.hasClass("fade")||!!n.find("> .fade").length);s.length&&r?s.one("bsTransitionEnd",o).emulateTransitionEnd(i.TRANSITION_DURATION):o(),s.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this};var a=function(i){i.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',a).on("click.bs.tab.data-api",'[data-toggle="pill"]',a)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),a=n.data("bs.affix"),o="object"==typeof e&&e;a||n.data("bs.affix",a=new i(this,o)),"string"==typeof e&&a[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.3.4",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getState=function(t,e,i,n){var a=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return i>a?"top":!1;if("bottom"==this.affixed)return null!=i?a+this.unpin<=o.top?!1:"bottom":t-n>=a+s?!1:"bottom";var r=null==this.affixed,l=r?a:o.top,c=r?s:e;return null!=i&&i>=a?"top":null!=n&&l+c>=t-n?"bottom":!1},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),n=this.options.offset,a=n.top,o=n.bottom,s=t(document.body).height();"object"!=typeof n&&(o=a=n),"function"==typeof a&&(a=n.top(this.$element)),"function"==typeof o&&(o=n.bottom(this.$element));var r=this.getState(s,e,a,o);if(this.affixed!=r){null!=this.unpin&&this.$element.css("top","");var l="affix"+(r?"-"+r:""),c=t.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=r,this.unpin="bottom"==r?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==r&&this.$element.offset({top:s-e-o})}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},null!=n.offsetBottom&&(n.offset.bottom=n.offsetBottom),null!=n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery);var Infographic=function(t,e){var i,n,a,o,s,r,l,c,d=jQuery.noConflict(),h=this,p=t,u=e,f=-1,g=function(){s=d('<ul class="infographic-frame"></ul>'),r=d('<ul class="infographic-nav"></ul>');var t=1;c.each(function(){s.append('<li class="frame-'+t+'"><div class="scroller"></div></li>'),r.append('<li><a href="#'+t+'"></a></li>'),t++}),s.append('<li class="frame-'+t+'"><div class="scroller"></div></li>'),"main"===u&&s.append('<li class="frame-'+(t+1)+'"><div class="scroller"></div></li>'),o.append(s),o.append(r)};h.init=function(){console.log("infographic",p,u),o=d(p),c=o.find(".infographic-content li"),g(),l=o.find(".infographic-content, .infographic-nav, .infographic-graph"),"main"===u?i=new Main_Infographic(p+" .infographic-graph"):"antimalaricos"===u?i=new Antimalaricos_Infographic(p+" .infographic-graph").init():"patentes"===u?i=new Patents_Infographic(p+" .infographic-graph").init():"fakes"===u&&(i=new Fakes_Infographic(p+" .infographic-graph").init()),h.onResize(),"main"===u&&i.init(),c.first().addClass("active"),r.find("li a").click(function(t){t.preventDefault(),d("html, body").animate({scrollTop:d(".infographic-frame li.frame-"+d(this).attr("href").substring(1)).offset().top+2},"200")})},h.onScroll=function(t){n=d(window).scrollTop(),n>=o.offset().top&&a>n?l.addClass("fixed"):l.removeClass("fixed"),n>=a?l.addClass("bottom"):l.removeClass("bottom");var e=f,s=Math.floor((n-o.offset().top)/d(window).height());f!==s&&(f=s,f>=0&&(console.log("state",u,f,c.size()),"main"===u&&(f!==c.size()?(d("#main-infographic-menu").removeClass("active"),o.find(".infographic-nav, .infographic-content").removeClass("invisible")):(d("#main-infographic-menu").addClass("active"),o.find(".infographic-nav, .infographic-content").addClass("invisible"))),i.setState(f),f>e?(c.not(".active").css("top","40px"),c.filter(".active").css("top","-40px").removeClass("active")):(c.not(".active").css("top","-40px"),c.filter(".active").css("top","40px").removeClass("active")),c.eq(f).css("top","0px").addClass("active"),r.find("li").removeClass("active"),r.find("li").eq(f).addClass("active")))},h.onResize=function(){o.find(".infographic-content, .infographic-nav, .infographic-frame li").height(d(window).height()),o.find(".infographic-graph").height(d(window).height()-d(".infographic-graph").position().top-30),a=o.offset().top+o.height()-d(window).height(),"main"===u&&i.isInitialized()&&i.resize()},h.init()},Fakes_Infographic=function(t){var e,i=jQuery.noConflict(),n=this,a=t,o=-1;n.init=function(){return d3.xml(i("body").data("url")+"/dist/svg/fakes.svg","image/svg+xml",function(t){i(a).append(t.documentElement),e=d3.select(a).select("svg"),e.selectAll("#Continents, #Path, #LomeLabel, #LomeMarker, #MumbaiLabel, #MumbaiMarker, #IndiaMarker, #IndiaLabel").style("opacity",0),e.select("#AfricanCountries").selectAll("path").style("opacity",0)}),n},n.setState=function(t){if(0===t)e.selectAll("#Path, #MumbaiMarker, #MumbaiLabel, #LomeMarker, #LomeLabel").transition().duration(200).style("opacity",0),1===o&&(r("#Continents",400),s("#India",600)),e.selectAll("#IndiaMarker, #IndiaLabel").transition().duration(300).delay(function(t,e){return 400+300*e}).style("opacity",1);else if(1===t){e.selectAll("#IndiaMarker, #IndiaLabel").transition().duration(200).style("opacity",0),e.select("#AfricanCountries").selectAll("path").transition().duration(200).style("opacity",0),r("#India",400),0===o&&s("#Continents",600),e.selectAll("#MumbaiMarker, #MumbaiLabel").transition().duration(300).delay(function(t,e){return 500+300*e}).style("opacity",1),e.selectAll("#LomeMarker, #LomeLabel").transition().duration(300).delay(function(t,e){return 1800+300*e}).style("opacity",1),e.select("#Path").style("opacity",1);var i=e.select("#Path").select("#SVGID_1_").attr("width");e.select("#Path").select("#SVGID_1_").attr("transform","translate("+i+" 0)").transition().duration(1500).delay(600).attr("transform","translate(0 0)")}else 2===t&&(e.selectAll("#Path, #MumbaiMarker, #MumbaiLabel, #LomeMarker, #LomeLabel").transition().duration(200).style("opacity",0),e.select("#AfricanCountries").selectAll("path").transition().duration(500).delay(function(t,e){return 300*e}).style("opacity",1));return o=t,n};var s=function(t,i){var n=e.select(t).node().getBBox();e.select(t).attr("transform","translate("+(n.x+.5*n.width)+" "+(n.y+.5*n.height)+") scale(0.9) translate(-"+(n.x+.5*n.width)+" -"+(n.y+.5*n.height)+")").transition().duration(i).attr("transform","translate(0 0) scale(1)").style("opacity",1)},r=function(t,i){var n=e.select(t).node().getBBox();e.select(t).transition().duration(i).attr("transform","translate("+(n.x+.5*n.width)+" "+(n.y+.5*n.height)+") scale(0.9) translate(-"+(n.x+.5*n.width)+" -"+(n.y+.5*n.height)+")").style("opacity",0)};return n},Patents_Infographic=function(t){var e,i=jQuery.noConflict(),n=this,a=t,o=-1,s=41,r=["Albania","Angola","Antigua and Barbuda","Argentina","Armenia","Australia","Austria","Bahrain","Bangladesh","Barbados","Belgium","Belize","Benin","Bolivia","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cabo Verde","Cambodia","Cameroon","Canada","Central African Republic","Chad","Chile","China","Colombia","Congo","Costa Rica","CÃ´te d'Ivoire","Croatia","Cuba","Cyprus","Czech Republic","D.R. Congo","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Estonia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kenya","Korea","Kuwait","Kyrgyz Republic","Lao P.D.R","Latvia","Lesotho","Liechtenstein","Lithuania","Luxembourg","Macao","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Mauritania","Mauritius","Mexico","Moldova","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russian Federation","Rwanda","Saint Kitts & Nevis","Saint Lucia","Saint Vincent & the Grenadines","Samoa","Saudi Arabia","Senegal","Seychelles","Sierra Leone","Singapore","Slovak Republic","Slovenia","Solomon Islands","South Africa","Spain","Sri Lanka","Suriname","Swaziland","Sweden","Switzerland","Chinese Taipei","Tajikistan","Tanzania","Thailand","Macedonia","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States of America","Uruguay","Vanuatu","Venezuela","Viet Nam","Yemen","Zambia","Zimbabwe"];n.init=function(){return d3.xml(i("body").data("url")+"/dist/svg/patentes.svg","image/svg+xml",function(t){i(a).append(t.documentElement),e=d3.select(a).select("svg"),e.selectAll("#World, #Doc1, #Doc2").style("opacity",0),e.selectAll("#Chemistry, #Time").selectAll("g").style("opacity",0),e.selectAll("#Sign").selectAll("g").style("opacity",function(t,e){return 4>e?0:1}),r=d3.shuffle(r),e.select("#World").selectAll("text").style("text-anchor",function(t,e){return 21>e?"end":"start"}).text(function(t,e){return r[e]}).transition().duration(1800).delay(function(t,e){return 100*e}).each(l)}),n},n.setState=function(t){return 0===t?(c(),h("#Doc1",300),e.select("#Sign").selectAll("g").transition().duration(400).delay(function(t,e){return 300*(4-e)}).style("opacity",1)):1===t?(c(),d("#Doc1",800)):2===t?(c(),h("#Doc1",300),h("#Doc2",300),e.select("#Chemistry").selectAll("g").transition().duration(500).delay(function(t,e){return 300*e}).style("opacity",1)):3===t?(c(),h("#Time",300),d("#Doc2",800),e.select("#Doc2").selectAll("g").transition().duration(500).delay(function(t,e){return 300*e}).style("opacity",1)):4===t?(c(),h("#Doc2",300),d("#Time",800),e.select("#Time").selectAll("g").transition().duration(500).delay(function(t,e){return 300*e}).style("opacity",1)):5===t&&(c(),h("#Time",300),e.select("#World").transition().duration(800).style("opacity",1)),o=t,n};var l=function(){var t=d3.select(this);!function e(){t=t.transition().style("opacity",0).each("end",function(){s>=r.length&&(s=0),d3.select(this).text(r[s++])}).transition().style("opacity",1).each("end",e)}()},c=function(){e.selectAll("#World, #Doc1, #Doc2").transition().duration(300).style("opacity",0),e.selectAll("#Chemistry, #Time, #Sign").selectAll("g").transition().duration(300).style("opacity",0)},d=function(t,i){var n=e.select(t).node().getBBox();e.select(t).attr("transform","translate("+(n.x+.5*n.width)+" "+(n.y+.5*n.height)+") scale(0.9) translate(-"+(n.x+.5*n.width)+" -"+(n.y+.5*n.height)+")").transition().duration(i).attr("transform","translate(0 0) scale(1)").style("opacity",1)},h=function(t,i){var n=e.select(t).node().getBBox();e.select(t).transition().duration(i).attr("transform","translate("+(n.x+.5*n.width)+" "+(n.y+.5*n.height)+") scale(0.9) translate(-"+(n.x+.5*n.width)+" -"+(n.y+.5*n.height)+")").style("opacity",0)};return n},Antimalaricos_Infographic=function(t){var e,i=jQuery.noConflict(),n=this,a=t;n.init=function(){return d3.xml(i("body").data("url")+"/dist/svg/antimalaricos.svg","image/svg+xml",function(t){i(a).append(t.documentElement),e=d3.select(a).select("svg"),e.selectAll("#Bubble1, #Bubble2, #Bubble3, #Brasil, #Bolivia, #Venezuela, #World, #India, #PathIndia, #Ginebra").style("opacity",0),e.select("#Markers").selectAll("image").style("opacity",0),e.select("#MarkersIndia").selectAll("image").style("opacity",0)}),n},n.setState=function(t){return 0===t?(s("#Bubble2"),e.selectAll("#Brasil").transition().duration(1e3).style("opacity",1),o("#Bubble1")):1===t?(s("#Bubble1"),l("#Markers"),e.selectAll("#Brasil, #Bolivia, #Venezuela").transition().duration(300).style("opacity",0),o("#Bubble2")):2===t?(s("#Bubble2"),l("#Markers"),l("#MarkersIndia"),e.selectAll("#Brasil, #Bolivia, #Venezuela, #World, #India, #PathIndia").transition().duration(300).style("opacity",0),e.selectAll("#Continent, #Brasil, #Bolivia, #Venezuela").transition().duration(500).delay(function(t,e){return 300*e}).style("opacity",1),r("#Markers",200,300)):3===t?(s("#Bubble3"),l("#Markers"),l("#MarkersIndia"),e.selectAll("#Continent, #Brasil, #Bolivia, #Venezuela, #Ginebra").transition().duration(300).style("opacity",0),e.select("#World").transition().duration(1e3).style("opacity",1),e.select("#India").transition().duration(500).delay(2e3).style("opacity",1),r("#MarkersIndia",600,900),e.select("#PathIndia").style("opacity",1),e.select("#PathIndia").select("#SVGID_antimalaricos_1_").attr("transform","scale(0 1)").transition().duration(1500).delay(800).attr("transform","scale(1 1)")):4===t&&(l("#MarkersIndia"),e.selectAll("#India, #PathIndia").transition().duration(300).style("opacity",0),e.select("#Ginebra").transition().duration(400).style("opacity",1),o("#Bubble3")),n};var o=function(t){var i=e.select(t).node().getBBox();e.select(t).attr("transform","translate("+(i.x+.5*i.width)+" "+(i.y+.5*i.height)+") scale(0.8) translate(-"+(i.x+.5*i.width)+" -"+(i.y+.5*i.height)+")").transition().duration(400).delay(300).attr("transform","translate(0 0) scale(1)").style("opacity",1)},s=function(t){var i=e.select(t).node().getBBox();e.select(t).transition().duration(400).attr("transform","translate("+(i.x+.5*i.width)+" "+(i.y+.5*i.height)+") scale(0.8) translate(-"+(i.x+.5*i.width)+" -"+(i.y+.5*i.height)+")").style("opacity",0)},r=function(t,i,n){e.select(t).selectAll("image").transition().duration(500).delay(function(t,e){return i+n*e}).style("opacity",1)},l=function(t){e.select(t).selectAll("image").transition().duration(300).style("opacity",0)};return n};